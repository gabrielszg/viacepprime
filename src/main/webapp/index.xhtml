<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<f:view contentType="text/html;charset=UTF-8" encoding="UTF-8">
	<h:head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>
		<h:outputStylesheet library="css" name="style.css" />
	</h:head>
	<h:body>

		<p:graphicImage library="images" name="banner.png"
			styleClass="flex-container" />

		<div class="flex-container">
			<div>
				<h:form id="frm">

					<p:messages closable="true" styleClass="msg" />

					<p:panelGrid columns="3" layout="flex" styleClass="ui-fluid"
						style="padding-top: 10px;">
						<p:inputMask id="cep" value="#{viaCepController.viaCepInput.cep}"
							size="20" required="true" requiredMessage="Digite um CEP!"
							mask="99999999" autoClear="false" immediate="true"
							placeholder="Digite um CEP" style="text-align: center;"
							slotChar="" />

						<p:commandButton value="Buscar" icon="pi pi-search"
							action="#{viaCepController.searchCep}" process="@form"
							update="frm frm2" />
					</p:panelGrid>
				</h:form>

				<p:spacer />

				<h:form id="form">

					<p:messages closable="true" styleClass="msg" />

					<p:panelGrid columns="2" layout="flex" styleClass="ui-fluid">

						<p:outputLabel value="UF" style="font-weight: bold;" />
						<p:selectOneMenu id="estado" value="#{viaCepController.uf}"
							required="true" requiredMessage="Selecione um estado" filter="true">
							<f:selectItem itemLabel="Selecione um estado" />
							<f:selectItems value="#{viaCepController.listEstados}"
								var="siglas" itemValue="#{siglas}" />
							<p:ajax event="itemSelect"
								listener="#{viaCepController.searchCity()}" update="cidade" />
						</p:selectOneMenu>

						<p:outputLabel value="Cidade" style="font-weight: bold;" />
						<p:selectOneMenu id="cidade" value="#{viaCepController.city}"
							required="true" requiredMessage="Selecione uma cidade" filter="true">
							<f:selectItem itemLabel="Selecione uma cidade" />
							<f:selectItems value="#{viaCepController.listMunicipios}"
								var="cidade" itemValue="#{cidade.nome}" />
						</p:selectOneMenu>

						<p:outputLabel value="Logradouro" style="font-weight: bold;" />
						<p:inputText value="#{viaCepController.viaCepInput.logr}"
							required="true" requiredMessage="Digite um logradouro" />

						<p:commandButton value="Buscar" icon="pi pi-search"
							action="#{viaCepController.searchCepPorUf}" process="@form"
							update="form frm3" />
					</p:panelGrid>
				</h:form>
			</div>

			<h:form id="frm2" styleClass="flex-container panel-cep">

				<p:panelGrid columns="2" layout="grid" styleClass="ui-fluid center"
					rendered="#{not empty viaCepController.viaCep.cep}">
					
					<p:outputLabel value="CEP:" style="font-weight: bold;" />
					<h:outputText value="#{viaCepController.viaCep.cep}" />

					<p:outputLabel value="Logradouro:" style="font-weight: bold;" />
					<h:outputText value="#{viaCepController.viaCep.logradouro}" />

					<p:outputLabel value="Complemento:" style="font-weight: bold;" />
					<h:outputText value="#{viaCepController.viaCep.complemento}" />

					<p:outputLabel value="Bairro:" style="font-weight: bold;" />
					<h:outputText value="#{viaCepController.viaCep.bairro}" />

					<p:outputLabel value="Localidade:" style="font-weight: bold;" />
					<h:outputText value="#{viaCepController.viaCep.localidade}" />

					<p:outputLabel value="UF:" style="font-weight: bold;" />
					<h:outputText value="#{viaCepController.viaCep.uf}" />

					<p:outputLabel value="IBGE:" style="font-weight: bold;" />
					<h:outputText value="#{viaCepController.viaCep.ibge}" />

					<p:outputLabel value="GIA:" style="font-weight: bold;" />
					<h:outputText value="#{viaCepController.viaCep.gia}" />

					<p:outputLabel value="DDD:" style="font-weight: bold;" />
					<h:outputText value="#{viaCepController.viaCep.ddd}" />

					<p:outputLabel value="SIAFI:" style="font-weight: bold;" />
					<h:outputText value="#{viaCepController.viaCep.siafi}" />
				</p:panelGrid>
			</h:form>
		</div>

		<br />

		<h:form id="frm3" styleClass="flex-container">
			
			<p:dataTable id="table" var="e" value="#{viaCepController.list}"
				reflow="true" stickyHeader="true" paginator="true"
				rendered="#{not empty viaCepController.list}"
				paginatorAlwaysVisible="false" paginatorPosition="bottom" rows="15"
				style="text-align: center;" touchable="true">

				<p:column headerText="CEP" width="80" style="text-align: center">
					<h:outputText value="#{e.cep}" />
				</p:column>

				<p:column headerText="Logradouro" width="120"
					style="text-align: center">
					<h:outputText value="#{e.logradouro}" />
				</p:column>

				<p:column headerText="Complemento" width="100"
					style="text-align: center">
					<h:outputText value="#{e.complemento}" />
				</p:column>

				<p:column headerText="Bairro" width="120" style="text-align: center">
					<h:outputText value="#{e.bairro}" />
				</p:column>

				<p:column headerText="Localidade" width="120"
					style="text-align: center">
					<h:outputText value="#{e.localidade}" />
				</p:column>

				<p:column headerText="UF" width="20" style="text-align: center">
					<h:outputText value="#{e.uf}" />
				</p:column>

				<p:column headerText="IBGE" width="55" style="text-align: center">
					<h:outputText value="#{e.ibge}" />
				</p:column>

				<p:column headerText="GIA" style="text-align: center">
					<h:outputText value="#{e.gia}" />
				</p:column>

				<p:column headerText="DDD" style="text-align: center">
					<h:outputText value="#{e.ddd}" />
				</p:column>

				<p:column headerText="SIAFI" style="text-align: center">
					<h:outputText value="#{e.siafi}" />
				</p:column>
			</p:dataTable>
		</h:form>
	</h:body>
</f:view>
</html>